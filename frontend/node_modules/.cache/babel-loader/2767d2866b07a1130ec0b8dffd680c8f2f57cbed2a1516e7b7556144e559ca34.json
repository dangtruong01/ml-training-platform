{"ast":null,"code":"var _jsxFileName = \"/Users/truonghaidang/Desktop/open-trainer/frontend/src/components/auto-annotation/DetectDefectsStep.js\";\nimport React, { useState, useEffect } from 'react';\nimport './AnomalyDetectionWorkflow.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction DetectDefectsStep({\n  projectId,\n  normalModelData,\n  onStepComplete\n}) {\n  var _detectionState$workf3;\n  const [detectionState, setDetectionState] = useState({\n    loadingWorkflowStatus: true,\n    workflowStatus: null,\n    detectingAnomalies: false,\n    anomalyResults: null,\n    method: 'mahalanobis',\n    thresholdPercentile: 95.0,\n    detectionMethod: 'statistical',\n    // 'statistical' or 'advanced'\n    ensembleMethod: 'majority_vote',\n    // 'majority_vote', 'average_score', 'max_score'\n    advancedMethods: 'ocsvm,isolation_forest,elliptic,pca'\n  });\n  const [errors, setErrors] = useState({});\n\n  // Load workflow status on component mount\n  useEffect(() => {\n    checkWorkflowStatus();\n  }, [projectId]);\n  const checkWorkflowStatus = async () => {\n    if (!projectId) return;\n    console.log('üîç Checking workflow status for Stage 3...');\n    setDetectionState(prev => ({\n      ...prev,\n      loadingWorkflowStatus: true\n    }));\n    try {\n      const response = await fetch(`/api/auto-annotation/projects/${projectId}/workflow-status`);\n      const result = await response.json();\n      if (result.status === 'success') {\n        const workflowStatus = result.workflow_status;\n        console.log('üìä Workflow status loaded:', workflowStatus);\n        setDetectionState(prev => ({\n          ...prev,\n          workflowStatus: workflowStatus,\n          loadingWorkflowStatus: false\n        }));\n\n        // If Stage 3 is already completed, load existing results\n        if (workflowStatus.stage3_completed) {\n          console.log('‚úÖ Stage 3 already completed, loading existing results');\n          // Could load existing Stage 3 results here if needed\n        }\n      } else {\n        console.log('‚ö†Ô∏è Could not load workflow status:', result.message);\n        setDetectionState(prev => ({\n          ...prev,\n          loadingWorkflowStatus: false\n        }));\n      }\n    } catch (error) {\n      console.error('‚ùå Error checking workflow status:', error);\n      setDetectionState(prev => ({\n        ...prev,\n        loadingWorkflowStatus: false\n      }));\n    }\n  };\n  const handleSettingChange = (setting, value) => {\n    setDetectionState(prev => ({\n      ...prev,\n      [setting]: value\n    }));\n  };\n  const detectDefects = async () => {\n    console.log('üéØ Starting defect detection using Stage 1 defective ROI results');\n    setDetectionState(prev => ({\n      ...prev,\n      detectingAnomalies: true\n    }));\n    setErrors({});\n    try {\n      const formData = new FormData();\n      formData.append('method', detectionState.method);\n      formData.append('threshold_percentile', detectionState.thresholdPercentile);\n      formData.append('detection_method', detectionState.detectionMethod);\n      if (detectionState.detectionMethod === 'advanced') {\n        formData.append('ensemble_method', detectionState.ensembleMethod);\n        formData.append('advanced_methods', detectionState.advancedMethods);\n      }\n      console.log(`üöÄ Sending defect detection request with method: ${detectionState.method}`);\n      const response = await fetch(`/api/auto-annotation/projects/${projectId}/detect-defects`, {\n        method: 'POST',\n        body: formData\n      });\n      const result = await response.json();\n      console.log('üì° Defect detection response:', result);\n      if (result.status === 'success') {\n        setDetectionState(prev => ({\n          ...prev,\n          anomalyResults: result\n        }));\n        console.log(`‚úÖ Defect detection completed: ${result.total_images} images processed`);\n      } else {\n        setErrors({\n          detection: result.message || 'Defect detection failed'\n        });\n      }\n    } catch (error) {\n      console.error('‚ùå Defect detection failed:', error);\n      setErrors({\n        detection: `Detection error: ${error.message}`\n      });\n    } finally {\n      setDetectionState(prev => ({\n        ...prev,\n        detectingAnomalies: false\n      }));\n    }\n  };\n  const handleProceedToNextStep = () => {\n    if (onStepComplete) {\n      onStepComplete(detectionState.anomalyResults);\n    }\n  };\n  const isReady = () => {\n    var _detectionState$workf;\n    return !detectionState.loadingWorkflowStatus && ((_detectionState$workf = detectionState.workflowStatus) === null || _detectionState$workf === void 0 ? void 0 : _detectionState$workf.stage1_completed) && normalModelData;\n  };\n  const getDefectiveImagesCount = () => {\n    var _detectionState$workf2;\n    return ((_detectionState$workf2 = detectionState.workflowStatus) === null || _detectionState$workf2 === void 0 ? void 0 : _detectionState$workf2.defective_images_count) || 0;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"detect-defects-step\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"step-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"\\uD83D\\uDD0D Step 3: Detect Defects in Images\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Apply the normal model to detect anomalies in defective images from Stage 1.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), detectionState.loadingWorkflowStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status-banner\",\n      style: {\n        padding: '15px',\n        background: '#fff3cd',\n        border: '1px solid #ffeaa7',\n        borderRadius: '8px',\n        marginBottom: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '16px'\n          },\n          children: \"\\uD83D\\uDD0D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 'bold'\n            },\n            children: \"Loading Workflow Status...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '14px',\n              color: '#856404'\n            },\n            children: \"Checking for Stage 1 results and defective images\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }, this), detectionState.workflowStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"workflow-status-banner\",\n      style: {\n        padding: '15px',\n        background: isReady() ? '#d4edda' : '#f8d7da',\n        border: `1px solid ${isReady() ? '#c3e6cb' : '#f5c6cb'}`,\n        borderRadius: '8px',\n        marginBottom: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '16px'\n          },\n          children: isReady() ? '‚úÖ' : '‚ö†Ô∏è'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: isReady() ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 'bold',\n                color: '#155724'\n              },\n              children: \"Ready for Defect Detection!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '14px',\n                color: '#155724'\n              },\n              children: [\"Found \", getDefectiveImagesCount(), \" defective images from Stage 1 (\", detectionState.workflowStatus.stage1_method, \") and normal model from Stage 2\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 'bold',\n                color: '#721c24'\n              },\n              children: \"Prerequisites Not Met\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '14px',\n                color: '#721c24'\n              },\n              children: [!((_detectionState$workf3 = detectionState.workflowStatus) !== null && _detectionState$workf3 !== void 0 && _detectionState$workf3.stage1_completed) && 'Complete Stage 1 (ROI Extraction) first. ', !normalModelData && 'Complete Stage 2 (Build Normal Model) first.']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detection-settings\",\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"\\u2699\\uFE0F Anomaly Detection Settings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"settings-grid\",\n        style: {\n          display: 'grid',\n          gridTemplateColumns: '1fr 1fr',\n          gap: '20px',\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"setting-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              marginBottom: '5px',\n              fontWeight: 'bold'\n            },\n            children: \"Detection Method\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: detectionState.detectionMethod,\n            onChange: e => handleSettingChange('detectionMethod', e.target.value),\n            disabled: detectionState.detectingAnomalies,\n            style: {\n              width: '100%',\n              padding: '8px',\n              border: '1px solid #ddd',\n              borderRadius: '4px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"statistical\",\n              children: \"Statistical (Fast)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"advanced\",\n              children: \"Advanced Ensemble (Slower)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '12px',\n              color: '#666',\n              marginTop: '2px'\n            },\n            children: \"Statistical uses single method, Advanced combines multiple algorithms\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"setting-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              marginBottom: '5px',\n              fontWeight: 'bold'\n            },\n            children: \"Statistical Method\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: detectionState.method,\n            onChange: e => handleSettingChange('method', e.target.value),\n            disabled: detectionState.detectingAnomalies || detectionState.detectionMethod === 'advanced',\n            style: {\n              width: '100%',\n              padding: '8px',\n              border: '1px solid #ddd',\n              borderRadius: '4px',\n              opacity: detectionState.detectionMethod === 'advanced' ? 0.5 : 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"mahalanobis\",\n              children: \"Mahalanobis Distance\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"euclidean\",\n              children: \"Euclidean Distance\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"cosine\",\n              children: \"Cosine Distance\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '12px',\n              color: '#666',\n              marginTop: '2px'\n            },\n            children: \"Distance metric for comparing against normal features\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"setting-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              marginBottom: '5px',\n              fontWeight: 'bold'\n            },\n            children: \"Anomaly Threshold\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"threshold-control\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              value: detectionState.thresholdPercentile,\n              onChange: e => handleSettingChange('thresholdPercentile', parseFloat(e.target.value)),\n              min: \"85\",\n              max: \"99\",\n              step: \"0.5\",\n              disabled: detectionState.detectingAnomalies,\n              style: {\n                width: '70%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                marginLeft: '10px',\n                fontWeight: 'bold'\n              },\n              children: [detectionState.thresholdPercentile, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '12px',\n              color: '#666',\n              marginTop: '2px'\n            },\n            children: \"Percentile threshold for anomaly detection (higher = stricter)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), detectionState.detectionMethod === 'advanced' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"setting-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              marginBottom: '5px',\n              fontWeight: 'bold'\n            },\n            children: \"Ensemble Method\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: detectionState.ensembleMethod,\n            onChange: e => handleSettingChange('ensembleMethod', e.target.value),\n            disabled: detectionState.detectingAnomalies,\n            style: {\n              width: '100%',\n              padding: '8px',\n              border: '1px solid #ddd',\n              borderRadius: '4px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"majority_vote\",\n              children: \"Majority Vote\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"average_score\",\n              children: \"Average Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"max_score\",\n              children: \"Maximum Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '12px',\n              color: '#666',\n              marginTop: '2px'\n            },\n            children: \"How to combine results from multiple detection algorithms\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detection-actions\",\n      style: {\n        textAlign: 'center',\n        marginBottom: '30px'\n      },\n      children: [errors.detection && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-banner\",\n        style: {\n          marginBottom: '15px',\n          padding: '10px',\n          background: '#fee',\n          border: '1px solid #fcc',\n          borderRadius: '4px',\n          color: '#c33'\n        },\n        children: [\"\\u274C \", errors.detection]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"detect-defects-button\",\n        onClick: detectDefects,\n        disabled: detectionState.detectingAnomalies || !isReady(),\n        style: {\n          padding: '15px 30px',\n          background: detectionState.detectingAnomalies || !isReady() ? '#6c757d' : '#dc3545',\n          color: 'white',\n          border: 'none',\n          borderRadius: '8px',\n          cursor: detectionState.detectingAnomalies || !isReady() ? 'not-allowed' : 'pointer',\n          fontSize: '16px',\n          fontWeight: 'bold',\n          boxShadow: '0 4px 8px rgba(220,53,69,0.3)',\n          opacity: !isReady() || detectionState.detectingAnomalies ? 0.6 : 1\n        },\n        children: detectionState.detectingAnomalies ? 'üîç Detecting Defects...' : `üöÄ Detect Defects (${detectionState.detectionMethod})`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this), !isReady() && !detectionState.loadingWorkflowStatus && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: '12px',\n          color: '#999',\n          marginTop: '8px'\n        },\n        children: \"Complete Stage 1 and Stage 2 first\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 11\n      }, this), isReady() && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: '12px',\n          color: '#dc3545',\n          marginTop: '8px'\n        },\n        children: [\"\\u2705 Ready to detect defects in \", getDefectiveImagesCount(), \" images from Stage 1\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }, this), detectionState.detectingAnomalies && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detection-progress\",\n        style: {\n          marginTop: '15px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-indicator\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar\",\n            style: {\n              width: '100%',\n              height: '4px',\n              background: '#e9ecef',\n              borderRadius: '2px',\n              overflow: 'hidden'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-fill indeterminate\",\n              style: {\n                height: '100%',\n                background: '#dc3545',\n                animation: 'indeterminate 1.5s infinite linear'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            marginTop: '8px',\n            fontSize: '14px',\n            color: '#666'\n          },\n          children: \"\\uD83E\\uDDE0 Analyzing defective images using normal model...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this), detectionState.anomalyResults && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detection-results\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"results-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"\\uD83C\\uDFAF Defect Detection Results\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"results-summary\",\n        style: {\n          display: 'grid',\n          gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n          gap: '15px',\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-card\",\n          style: {\n            padding: '15px',\n            background: '#f8f9fa',\n            borderRadius: '8px',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '24px',\n              fontWeight: 'bold',\n              color: '#dc3545'\n            },\n            children: detectionState.anomalyResults.total_images\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              color: '#666'\n            },\n            children: \"Total Images Processed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-card\",\n          style: {\n            padding: '15px',\n            background: '#f8f9fa',\n            borderRadius: '8px',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '24px',\n              fontWeight: 'bold',\n              color: '#28a745'\n            },\n            children: detectionState.anomalyResults.results ? detectionState.anomalyResults.results.filter(r => r.status === 'success').length : 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              color: '#666'\n            },\n            children: \"Successful Detections\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-card\",\n          style: {\n            padding: '15px',\n            background: '#f8f9fa',\n            borderRadius: '8px',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '24px',\n              fontWeight: 'bold',\n              color: '#6f42c1'\n            },\n            children: detectionState.anomalyResults.method\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              color: '#666'\n            },\n            children: \"Detection Method\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-card\",\n          style: {\n            padding: '15px',\n            background: '#f8f9fa',\n            borderRadius: '8px',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '24px',\n              fontWeight: 'bold',\n              color: '#fd7e14'\n            },\n            children: [detectionState.anomalyResults.threshold_percentile, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              color: '#666'\n            },\n            children: \"Threshold Used\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 11\n      }, this), detectionState.anomalyResults.results && detectionState.anomalyResults.results.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sample-results\",\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n          children: [\"\\uD83D\\uDD0D Sample Detection Results (First \", Math.min(5, detectionState.anomalyResults.results.length), \" Images)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sample-grid\",\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))',\n            gap: '10px'\n          },\n          children: detectionState.anomalyResults.results.slice(0, 5).map((result, index) => {\n            var _result$image_scores, _result$image_scores$, _result$image_scores2, _result$image_scores3;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sample-item\",\n              style: {\n                padding: '10px',\n                background: '#fff',\n                border: '1px solid #dee2e6',\n                borderRadius: '4px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 'bold',\n                  marginBottom: '5px'\n                },\n                children: [result.image_name && result.image_name.substring(0, 20), \"...\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '12px',\n                  color: '#666'\n                },\n                children: [\"Max Score: \", (_result$image_scores = result.image_scores) === null || _result$image_scores === void 0 ? void 0 : (_result$image_scores$ = _result$image_scores.max_score) === null || _result$image_scores$ === void 0 ? void 0 : _result$image_scores$.toFixed(3), \" | Anomaly: \", (_result$image_scores2 = result.image_scores) === null || _result$image_scores2 === void 0 ? void 0 : (_result$image_scores3 = _result$image_scores2.anomaly_percentage) === null || _result$image_scores3 === void 0 ? void 0 : _result$image_scores3.toFixed(1), \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '10px',\n                  color: result.status === 'success' ? '#28a745' : '#dc3545',\n                  marginTop: '5px'\n                },\n                children: [\"Status: \", result.status]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"action-buttons\",\n        style: {\n          display: 'flex',\n          gap: '15px',\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"complete-button\",\n          onClick: handleProceedToNextStep,\n          style: {\n            padding: '12px 24px',\n            background: '#28a745',\n            color: 'white',\n            border: 'none',\n            borderRadius: '6px',\n            cursor: 'pointer',\n            fontSize: '14px',\n            fontWeight: 'bold'\n          },\n          children: \"\\u2705 Proceed to Step 4 \\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"success-message\",\n        style: {\n          textAlign: 'center',\n          marginTop: '15px',\n          padding: '15px',\n          background: '#d4edda',\n          border: '1px solid #c3e6cb',\n          borderRadius: '8px',\n          color: '#155724'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '16px',\n            fontWeight: 'bold',\n            marginBottom: '8px'\n          },\n          children: \"\\u2705 Defect Detection Complete!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '14px'\n          },\n          children: [\"\\uD83E\\uDDE0 Applied normal model to detect anomalies\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 58\n          }, this), \"\\uD83C\\uDFAF Generated heatmaps for defective regions\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 58\n          }, this), \"\\uD83D\\uDCCA Ready for bounding box generation in Step 4\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"step-info\",\n      style: {\n        marginTop: '30px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"\\u2139\\uFE0F About Defect Detection\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info-points\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-point\",\n          style: {\n            display: 'flex',\n            alignItems: 'flex-start',\n            gap: '8px',\n            marginBottom: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '16px'\n            },\n            children: \"\\uD83E\\uDDE0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '14px'\n            },\n            children: \"Uses defective image ROIs from Stage 1 (no upload needed)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-point\",\n          style: {\n            display: 'flex',\n            alignItems: 'flex-start',\n            gap: '8px',\n            marginBottom: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '16px'\n            },\n            children: \"\\uD83D\\uDCCA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '14px'\n            },\n            children: \"Applies normal model from Stage 2 to detect anomalies\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-point\",\n          style: {\n            display: 'flex',\n            alignItems: 'flex-start',\n            gap: '8px',\n            marginBottom: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '16px'\n            },\n            children: \"\\uD83C\\uDFAF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '14px'\n            },\n            children: \"Generates heatmaps showing defective regions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-point\",\n          style: {\n            display: 'flex',\n            alignItems: 'flex-start',\n            gap: '8px',\n            marginBottom: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '16px'\n            },\n            children: \"\\u2699\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '14px'\n            },\n            children: \"Statistical or advanced ensemble detection methods\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        @keyframes indeterminate {\n          0% { transform: translateX(-100%); }\n          100% { transform: translateX(300%); }\n        }\n        \n        .progress-fill.indeterminate {\n          animation: indeterminate 1.5s infinite linear;\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n}\nexport default DetectDefectsStep;","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","DetectDefectsStep","projectId","normalModelData","onStepComplete","_detectionState$workf3","detectionState","setDetectionState","loadingWorkflowStatus","workflowStatus","detectingAnomalies","anomalyResults","method","thresholdPercentile","detectionMethod","ensembleMethod","advancedMethods","errors","setErrors","checkWorkflowStatus","console","log","prev","response","fetch","result","json","status","workflow_status","stage3_completed","message","error","handleSettingChange","setting","value","detectDefects","formData","FormData","append","body","total_images","detection","handleProceedToNextStep","isReady","_detectionState$workf","stage1_completed","getDefectiveImagesCount","_detectionState$workf2","defective_images_count","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","padding","background","border","borderRadius","marginBottom","display","alignItems","gap","fontSize","fontWeight","color","stage1_method","gridTemplateColumns","onChange","e","target","disabled","width","marginTop","opacity","type","parseFloat","min","max","step","marginLeft","textAlign","onClick","cursor","boxShadow","height","overflow","animation","results","filter","r","length","threshold_percentile","Math","slice","map","index","_result$image_scores","_result$image_scores$","_result$image_scores2","_result$image_scores3","image_name","substring","image_scores","max_score","toFixed","anomaly_percentage","justifyContent","jsx"],"sources":["/Users/truonghaidang/Desktop/open-trainer/frontend/src/components/auto-annotation/DetectDefectsStep.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './AnomalyDetectionWorkflow.css';\n\nfunction DetectDefectsStep({ projectId, normalModelData, onStepComplete }) {\n  const [detectionState, setDetectionState] = useState({\n    loadingWorkflowStatus: true,\n    workflowStatus: null,\n    detectingAnomalies: false,\n    anomalyResults: null,\n    method: 'mahalanobis',\n    thresholdPercentile: 95.0,\n    detectionMethod: 'statistical',  // 'statistical' or 'advanced'\n    ensembleMethod: 'majority_vote',  // 'majority_vote', 'average_score', 'max_score'\n    advancedMethods: 'ocsvm,isolation_forest,elliptic,pca'\n  });\n  const [errors, setErrors] = useState({});\n\n  // Load workflow status on component mount\n  useEffect(() => {\n    checkWorkflowStatus();\n  }, [projectId]);\n\n  const checkWorkflowStatus = async () => {\n    if (!projectId) return;\n\n    console.log('üîç Checking workflow status for Stage 3...');\n    setDetectionState(prev => ({ ...prev, loadingWorkflowStatus: true }));\n\n    try {\n      const response = await fetch(`/api/auto-annotation/projects/${projectId}/workflow-status`);\n      const result = await response.json();\n\n      if (result.status === 'success') {\n        const workflowStatus = result.workflow_status;\n        \n        console.log('üìä Workflow status loaded:', workflowStatus);\n        \n        setDetectionState(prev => ({\n          ...prev,\n          workflowStatus: workflowStatus,\n          loadingWorkflowStatus: false\n        }));\n\n        // If Stage 3 is already completed, load existing results\n        if (workflowStatus.stage3_completed) {\n          console.log('‚úÖ Stage 3 already completed, loading existing results');\n          // Could load existing Stage 3 results here if needed\n        }\n      } else {\n        console.log('‚ö†Ô∏è Could not load workflow status:', result.message);\n        setDetectionState(prev => ({ ...prev, loadingWorkflowStatus: false }));\n      }\n    } catch (error) {\n      console.error('‚ùå Error checking workflow status:', error);\n      setDetectionState(prev => ({ ...prev, loadingWorkflowStatus: false }));\n    }\n  };\n\n  const handleSettingChange = (setting, value) => {\n    setDetectionState(prev => ({\n      ...prev,\n      [setting]: value\n    }));\n  };\n\n  const detectDefects = async () => {\n    console.log('üéØ Starting defect detection using Stage 1 defective ROI results');\n    setDetectionState(prev => ({ ...prev, detectingAnomalies: true }));\n    setErrors({});\n\n    try {\n      const formData = new FormData();\n      formData.append('method', detectionState.method);\n      formData.append('threshold_percentile', detectionState.thresholdPercentile);\n      formData.append('detection_method', detectionState.detectionMethod);\n      \n      if (detectionState.detectionMethod === 'advanced') {\n        formData.append('ensemble_method', detectionState.ensembleMethod);\n        formData.append('advanced_methods', detectionState.advancedMethods);\n      }\n\n      console.log(`üöÄ Sending defect detection request with method: ${detectionState.method}`);\n\n      const response = await fetch(`/api/auto-annotation/projects/${projectId}/detect-defects`, {\n        method: 'POST',\n        body: formData\n      });\n\n      const result = await response.json();\n      console.log('üì° Defect detection response:', result);\n\n      if (result.status === 'success') {\n        setDetectionState(prev => ({\n          ...prev,\n          anomalyResults: result\n        }));\n        console.log(`‚úÖ Defect detection completed: ${result.total_images} images processed`);\n      } else {\n        setErrors({ detection: result.message || 'Defect detection failed' });\n      }\n    } catch (error) {\n      console.error('‚ùå Defect detection failed:', error);\n      setErrors({ detection: `Detection error: ${error.message}` });\n    } finally {\n      setDetectionState(prev => ({ ...prev, detectingAnomalies: false }));\n    }\n  };\n\n  const handleProceedToNextStep = () => {\n    if (onStepComplete) {\n      onStepComplete(detectionState.anomalyResults);\n    }\n  };\n\n  const isReady = () => {\n    return (\n      !detectionState.loadingWorkflowStatus &&\n      detectionState.workflowStatus?.stage1_completed &&\n      normalModelData\n    );\n  };\n\n  const getDefectiveImagesCount = () => {\n    return detectionState.workflowStatus?.defective_images_count || 0;\n  };\n\n  return (\n    <div className=\"detect-defects-step\">\n      <div className=\"step-header\">\n        <h4>üîç Step 3: Detect Defects in Images</h4>\n        <p>Apply the normal model to detect anomalies in defective images from Stage 1.</p>\n      </div>\n\n      {/* Workflow Status Banner */}\n      {detectionState.loadingWorkflowStatus && (\n        <div className=\"status-banner\" style={{ padding: '15px', background: '#fff3cd', border: '1px solid #ffeaa7', borderRadius: '8px', marginBottom: '20px' }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n            <div style={{ fontSize: '16px' }}>üîç</div>\n            <div>\n              <div style={{ fontWeight: 'bold' }}>Loading Workflow Status...</div>\n              <div style={{ fontSize: '14px', color: '#856404' }}>Checking for Stage 1 results and defective images</div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {detectionState.workflowStatus && (\n        <div className=\"workflow-status-banner\" style={{ \n          padding: '15px', \n          background: isReady() ? '#d4edda' : '#f8d7da', \n          border: `1px solid ${isReady() ? '#c3e6cb' : '#f5c6cb'}`, \n          borderRadius: '8px', \n          marginBottom: '20px' \n        }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n            <div style={{ fontSize: '16px' }}>{isReady() ? '‚úÖ' : '‚ö†Ô∏è'}</div>\n            <div>\n              {isReady() ? (\n                <>\n                  <div style={{ fontWeight: 'bold', color: '#155724' }}>Ready for Defect Detection!</div>\n                  <div style={{ fontSize: '14px', color: '#155724' }}>\n                    Found {getDefectiveImagesCount()} defective images from Stage 1 \n                    ({detectionState.workflowStatus.stage1_method}) and normal model from Stage 2\n                  </div>\n                </>\n              ) : (\n                <>\n                  <div style={{ fontWeight: 'bold', color: '#721c24' }}>Prerequisites Not Met</div>\n                  <div style={{ fontSize: '14px', color: '#721c24' }}>\n                    {!detectionState.workflowStatus?.stage1_completed && 'Complete Stage 1 (ROI Extraction) first. '}\n                    {!normalModelData && 'Complete Stage 2 (Build Normal Model) first.'}\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Detection Settings */}\n      <div className=\"detection-settings\">\n        <h5>‚öôÔ∏è Anomaly Detection Settings</h5>\n        <div className=\"settings-grid\" style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', marginBottom: '20px' }}>\n          \n          <div className=\"setting-item\">\n            <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>\n              Detection Method\n            </label>\n            <select\n              value={detectionState.detectionMethod}\n              onChange={(e) => handleSettingChange('detectionMethod', e.target.value)}\n              disabled={detectionState.detectingAnomalies}\n              style={{\n                width: '100%',\n                padding: '8px',\n                border: '1px solid #ddd',\n                borderRadius: '4px'\n              }}\n            >\n              <option value=\"statistical\">Statistical (Fast)</option>\n              <option value=\"advanced\">Advanced Ensemble (Slower)</option>\n            </select>\n            <p style={{ fontSize: '12px', color: '#666', marginTop: '2px' }}>\n              Statistical uses single method, Advanced combines multiple algorithms\n            </p>\n          </div>\n\n          <div className=\"setting-item\">\n            <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>\n              Statistical Method\n            </label>\n            <select\n              value={detectionState.method}\n              onChange={(e) => handleSettingChange('method', e.target.value)}\n              disabled={detectionState.detectingAnomalies || detectionState.detectionMethod === 'advanced'}\n              style={{\n                width: '100%',\n                padding: '8px',\n                border: '1px solid #ddd',\n                borderRadius: '4px',\n                opacity: detectionState.detectionMethod === 'advanced' ? 0.5 : 1\n              }}\n            >\n              <option value=\"mahalanobis\">Mahalanobis Distance</option>\n              <option value=\"euclidean\">Euclidean Distance</option>\n              <option value=\"cosine\">Cosine Distance</option>\n            </select>\n            <p style={{ fontSize: '12px', color: '#666', marginTop: '2px' }}>\n              Distance metric for comparing against normal features\n            </p>\n          </div>\n\n          <div className=\"setting-item\">\n            <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>\n              Anomaly Threshold\n            </label>\n            <div className=\"threshold-control\">\n              <input\n                type=\"range\"\n                value={detectionState.thresholdPercentile}\n                onChange={(e) => handleSettingChange('thresholdPercentile', parseFloat(e.target.value))}\n                min=\"85\"\n                max=\"99\"\n                step=\"0.5\"\n                disabled={detectionState.detectingAnomalies}\n                style={{ width: '70%' }}\n              />\n              <span style={{ marginLeft: '10px', fontWeight: 'bold' }}>\n                {detectionState.thresholdPercentile}%\n              </span>\n            </div>\n            <p style={{ fontSize: '12px', color: '#666', marginTop: '2px' }}>\n              Percentile threshold for anomaly detection (higher = stricter)\n            </p>\n          </div>\n\n          {detectionState.detectionMethod === 'advanced' && (\n            <div className=\"setting-item\">\n              <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>\n                Ensemble Method\n              </label>\n              <select\n                value={detectionState.ensembleMethod}\n                onChange={(e) => handleSettingChange('ensembleMethod', e.target.value)}\n                disabled={detectionState.detectingAnomalies}\n                style={{\n                  width: '100%',\n                  padding: '8px',\n                  border: '1px solid #ddd',\n                  borderRadius: '4px'\n                }}\n              >\n                <option value=\"majority_vote\">Majority Vote</option>\n                <option value=\"average_score\">Average Score</option>\n                <option value=\"max_score\">Maximum Score</option>\n              </select>\n              <p style={{ fontSize: '12px', color: '#666', marginTop: '2px' }}>\n                How to combine results from multiple detection algorithms\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Detection Button */}\n      <div className=\"detection-actions\" style={{ textAlign: 'center', marginBottom: '30px' }}>\n        {errors.detection && (\n          <div className=\"error-banner\" style={{ marginBottom: '15px', padding: '10px', background: '#fee', border: '1px solid #fcc', borderRadius: '4px', color: '#c33' }}>\n            ‚ùå {errors.detection}\n          </div>\n        )}\n\n        <button\n          className=\"detect-defects-button\"\n          onClick={detectDefects}\n          disabled={detectionState.detectingAnomalies || !isReady()}\n          style={{\n            padding: '15px 30px',\n            background: (detectionState.detectingAnomalies || !isReady()) ? '#6c757d' : '#dc3545',\n            color: 'white',\n            border: 'none',\n            borderRadius: '8px',\n            cursor: (detectionState.detectingAnomalies || !isReady()) ? 'not-allowed' : 'pointer',\n            fontSize: '16px',\n            fontWeight: 'bold',\n            boxShadow: '0 4px 8px rgba(220,53,69,0.3)',\n            opacity: (!isReady() || detectionState.detectingAnomalies) ? 0.6 : 1\n          }}\n        >\n          {detectionState.detectingAnomalies \n            ? 'üîç Detecting Defects...' \n            : `üöÄ Detect Defects (${detectionState.detectionMethod})`\n          }\n        </button>\n\n        {!isReady() && !detectionState.loadingWorkflowStatus && (\n          <p style={{ fontSize: '12px', color: '#999', marginTop: '8px' }}>\n            Complete Stage 1 and Stage 2 first\n          </p>\n        )}\n\n        {isReady() && (\n          <p style={{ fontSize: '12px', color: '#dc3545', marginTop: '8px' }}>\n            ‚úÖ Ready to detect defects in {getDefectiveImagesCount()} images from Stage 1\n          </p>\n        )}\n\n        {detectionState.detectingAnomalies && (\n          <div className=\"detection-progress\" style={{ marginTop: '15px' }}>\n            <div className=\"progress-indicator\">\n              <div className=\"progress-bar\" style={{ width: '100%', height: '4px', background: '#e9ecef', borderRadius: '2px', overflow: 'hidden' }}>\n                <div className=\"progress-fill indeterminate\" style={{ height: '100%', background: '#dc3545', animation: 'indeterminate 1.5s infinite linear' }}></div>\n              </div>\n            </div>\n            <p style={{ marginTop: '8px', fontSize: '14px', color: '#666' }}>\n              üß† Analyzing defective images using normal model...\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* Results Section */}\n      {detectionState.anomalyResults && (\n        <div className=\"detection-results\">\n          <div className=\"results-header\">\n            <h5>üéØ Defect Detection Results</h5>\n          </div>\n          \n          <div className=\"results-summary\" style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '15px', marginBottom: '20px' }}>\n            <div className=\"summary-card\" style={{ padding: '15px', background: '#f8f9fa', borderRadius: '8px', textAlign: 'center' }}>\n              <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#dc3545' }}>\n                {detectionState.anomalyResults.total_images}\n              </div>\n              <div style={{ fontSize: '12px', color: '#666' }}>Total Images Processed</div>\n            </div>\n            \n            <div className=\"summary-card\" style={{ padding: '15px', background: '#f8f9fa', borderRadius: '8px', textAlign: 'center' }}>\n              <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#28a745' }}>\n                {detectionState.anomalyResults.results ? detectionState.anomalyResults.results.filter(r => r.status === 'success').length : 0}\n              </div>\n              <div style={{ fontSize: '12px', color: '#666' }}>Successful Detections</div>\n            </div>\n            \n            <div className=\"summary-card\" style={{ padding: '15px', background: '#f8f9fa', borderRadius: '8px', textAlign: 'center' }}>\n              <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#6f42c1' }}>\n                {detectionState.anomalyResults.method}\n              </div>\n              <div style={{ fontSize: '12px', color: '#666' }}>Detection Method</div>\n            </div>\n            \n            <div className=\"summary-card\" style={{ padding: '15px', background: '#f8f9fa', borderRadius: '8px', textAlign: 'center' }}>\n              <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#fd7e14' }}>\n                {detectionState.anomalyResults.threshold_percentile}%\n              </div>\n              <div style={{ fontSize: '12px', color: '#666' }}>Threshold Used</div>\n            </div>\n          </div>\n\n          {/* Sample Results */}\n          {detectionState.anomalyResults.results && detectionState.anomalyResults.results.length > 0 && (\n            <div className=\"sample-results\" style={{ marginBottom: '20px' }}>\n              <h6>üîç Sample Detection Results (First {Math.min(5, detectionState.anomalyResults.results.length)} Images)</h6>\n              <div className=\"sample-grid\" style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))', gap: '10px' }}>\n                {detectionState.anomalyResults.results.slice(0, 5).map((result, index) => (\n                  <div key={index} className=\"sample-item\" style={{ padding: '10px', background: '#fff', border: '1px solid #dee2e6', borderRadius: '4px' }}>\n                    <div style={{ fontWeight: 'bold', marginBottom: '5px' }}>\n                      {result.image_name && result.image_name.substring(0, 20)}...\n                    </div>\n                    <div style={{ fontSize: '12px', color: '#666' }}>\n                      Max Score: {result.image_scores?.max_score?.toFixed(3)} | \n                      Anomaly: {result.image_scores?.anomaly_percentage?.toFixed(1)}%\n                    </div>\n                    <div style={{ fontSize: '10px', color: result.status === 'success' ? '#28a745' : '#dc3545', marginTop: '5px' }}>\n                      Status: {result.status}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"action-buttons\" style={{ display: 'flex', gap: '15px', justifyContent: 'center', alignItems: 'center' }}>\n            <button\n              className=\"complete-button\"\n              onClick={handleProceedToNextStep}\n              style={{\n                padding: '12px 24px',\n                background: '#28a745',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                cursor: 'pointer',\n                fontSize: '14px',\n                fontWeight: 'bold'\n              }}\n            >\n              ‚úÖ Proceed to Step 4 ‚Üí\n            </button>\n          </div>\n\n          <div className=\"success-message\" style={{ textAlign: 'center', marginTop: '15px', padding: '15px', background: '#d4edda', border: '1px solid #c3e6cb', borderRadius: '8px', color: '#155724' }}>\n            <div style={{ fontSize: '16px', fontWeight: 'bold', marginBottom: '8px' }}>\n              ‚úÖ Defect Detection Complete!\n            </div>\n            <div style={{ fontSize: '14px' }}>\n              üß† Applied normal model to detect anomalies<br/>\n              üéØ Generated heatmaps for defective regions<br/>\n              üìä Ready for bounding box generation in Step 4\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Info Section */}\n      <div className=\"step-info\" style={{ marginTop: '30px' }}>\n        <h5>‚ÑπÔ∏è About Defect Detection</h5>\n        <div className=\"info-points\">\n          <div className=\"info-point\" style={{ display: 'flex', alignItems: 'flex-start', gap: '8px', marginBottom: '8px' }}>\n            <span style={{ fontSize: '16px' }}>üß†</span>\n            <span style={{ fontSize: '14px' }}>Uses defective image ROIs from Stage 1 (no upload needed)</span>\n          </div>\n          <div className=\"info-point\" style={{ display: 'flex', alignItems: 'flex-start', gap: '8px', marginBottom: '8px' }}>\n            <span style={{ fontSize: '16px' }}>üìä</span>\n            <span style={{ fontSize: '14px' }}>Applies normal model from Stage 2 to detect anomalies</span>\n          </div>\n          <div className=\"info-point\" style={{ display: 'flex', alignItems: 'flex-start', gap: '8px', marginBottom: '8px' }}>\n            <span style={{ fontSize: '16px' }}>üéØ</span>\n            <span style={{ fontSize: '14px' }}>Generates heatmaps showing defective regions</span>\n          </div>\n          <div className=\"info-point\" style={{ display: 'flex', alignItems: 'flex-start', gap: '8px', marginBottom: '8px' }}>\n            <span style={{ fontSize: '16px' }}>‚öôÔ∏è</span>\n            <span style={{ fontSize: '14px' }}>Statistical or advanced ensemble detection methods</span>\n          </div>\n        </div>\n      </div>\n\n      <style jsx>{`\n        @keyframes indeterminate {\n          0% { transform: translateX(-100%); }\n          100% { transform: translateX(300%); }\n        }\n        \n        .progress-fill.indeterminate {\n          animation: indeterminate 1.5s infinite linear;\n        }\n      `}</style>\n    </div>\n  );\n}\n\nexport default DetectDefectsStep;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}